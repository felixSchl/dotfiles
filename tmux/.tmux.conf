# ...
set-option -g default-command "reattach-to-user-namespace -l zsh"

# Use utf-8
set -g utf8
set-window-option -g utf8 on

# Use Vi mode
setw -g mode-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Update default binding of `Enter` to also use copy-pipe
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

# Use <C-a> as prefix
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Quick pane cycling with <C-A>
unbind ^j
bind ^j select-pane -t :.+

# Vi pane movement
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind h select-pane -L

# Sane scrolling
set -g mode-mouse on
set -g mouse-select-pane on
set -g mouse-resize-pane on
set -g mouse-select-window on

# start window numbering at 1
set -g base-index 1
set -g pane-base-index 1

set -g @tpm_plugins '              \
  tmux-plugins/tpm                 \
  tmux-plugins/tmux-sensible       \
'

# Quick reload
unbind r
bind r source-file ~/.tmux.conf\; display "Reloaded"

setw -g monitor-activity on
set -g visual-activity on

# ----------
# Status Bar
# ----------
set -g status-utf8 on
set -g status-justify centre
set-option -g status-position bottom

set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg colour236
set-window-option -g window-status-attr dim

set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg colour236 
set-window-option -g window-status-current-attr bright

# ... ]> .. ]>
HOST="#[bg=colour24]#[fg=green] #h#[fg=colour24]"
EXIP="#[bg=colour60]> #[fg=yellow]#(curl icanhazip.com)#[fg=colour60]"
EN0_="#(ifconfig en0 | grep 'inet ' | awk '{print \"en0 \" $2}')"
EN1_="#(ifconfig en1 | grep 'inet ' | awk '{print \"en1 \" $2}')"
IFAC="#[bg=colour96]> #[fg=white]$EN0_$EN1_#[fg=colour96]"

set -g status-left-length 70
set -g status-left "$HOST $EXIP $IFAC #[bg=default]>"

set -g status-bg '#1C1D1C'
set -g status-fg '#ffffff'
set -g window-status-format ' #I #W >'
set -g window-status-current-format '#[fg=#000000] (#I) #W '
setw -g window-status-current-bg '#55ff55'
setw -g window-status-current-fg '#000000'

# <[ .. <[ ...
DATE="#[fg=colour53]<#[bg=colour53]#[fg=#ffffff] %d %b %Y"
TIME="#[fg=colour96]<#[bg=colour96]#[fg=#ffffff] %l:%M %p"
SESH="#[fg=colour138]<#[bg=colour138]#[fg=#000000] #S #I:#P"

set -g status-right-length 60
set -g status-right "$SESH $TIME $DATE "

run-shell '~/.tmux/plugins/tpm/tpm'
